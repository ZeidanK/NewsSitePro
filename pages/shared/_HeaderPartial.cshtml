@model NewsSitePro.Models.HeaderViewModel

<style>
    header {
    background: #222;
    color: #fff;
    padding: 0.5rem 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    nav {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0 2rem;
    }
    .nav-btn {
    background: none;
    border: none;
    color: #fff;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
    text-decoration: none;
    transition: background 0.2s, color 0.2s;
    position: relative;
    display: flex;
    align-items: center;
    }
    .nav-btn:hover, .nav-btn:focus {
    background: #444;
    color: #ffd700;
    outline: none;
    }
    .nav-btn.active {
    background: #ffd700;
    color: #222;
    font-weight: bold;
    }
    .icon-bell {
    margin-right: 0.3em;
    }
    .badge {
    background: #e74c3c;
    color: #fff;
    border-radius: 50%;
    padding: 0.2em 0.6em;
    font-size: 0.8em;
    margin-left: 0.3em;
    font-weight: bold;
    }
    .header-current-page {
    margin-left: 2rem;
    font-size: 0.95rem;
    color: #bbb;
    }
</style>

<header>
    <nav>
        <a class="nav-btn @(Model.CurrentPage == "Home" ? "active" : "")" href="/">Home</a>
        @if (Model.user != null)
        {
            <a class="nav-btn @(Model.CurrentPage == "Profile" ? "active" : "")" href="/Profile">@Model.user.Name</a>
            <a class="nav-btn @(Model.CurrentPage == "Post" ? "active" : "")" href="/Post">Post</a>
            <a class="nav-btn @(Model.CurrentPage == "Notifications" ? "active" : "")" href="/Notifications">
                <span class="icon-bell">🔔</span>
                Notifications
                @if (Model.NotificationCount > 0)
                {
                    <span class="badge">@Model.NotificationCount</span>
                }
            </a>
            <a id="logoutBtn" class="nav-btn" >Logout</a>

            @if (Model.user.IsAdmin)
            {
                <a class="nav-btn @(Model.CurrentPage == "Admin" ? "active" : "")" href="/Admin">Admin</a>
            }
            }
            else
            {
            <a class="nav-btn @(Model.CurrentPage == "Login" ? "active" : "")" href="/Login">Login</a>
            <a class="nav-btn @(Model.CurrentPage == "Register" ? "active" : "")" href="/Register">Register</a>
            }
            <span class="header-current-page">Current Page: @Model.CurrentPage</span>
            </nav>
            </header>



@* @section Scripts {
    <script>
        console.log("Script is running!");
        document.addEventListener('DOMContentLoaded', function () {
            console.log("DOMContentLoaded event fired"); // Debugging
            var logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                console.log("Logout button found"); // Debugging
                logoutBtn.addEventListener('click', function (e) {
                    alert("test");
                    e.preventDefault();
                    // Remove JWT from localStorage
                    localStorage.removeItem('jwtToken');
                    // Remove JWT from cookies
                    document.cookie = 'jwtToken=; Max-Age=0; path=/;';
                    // Redirect to Login page
                    window.location.href = '/Login';
                });
            } else {
                console.log("Logout button not found"); // Debugging
            }
        });
    </script>
} *@