@model NewsSitePro.Models.PostsListViewModel
@using NewsSitePro.Models

<!--
    Enhanced PostsList view that renders posts using the new context-driven system.
    This view is used by AJAX endpoints to return server-rendered HTML for dynamic loading.
    It automatically determines the appropriate context based on the current user and post data.
-->

@foreach (var post in Model.Posts)
{
    @await Component.InvokeAsync("PostCard", new PostCardViewModel 
    { 
        Post = post, 
        Context = PostContextFactory.CreateFeedContext(Model.CurrentUser, post, Model.FeedType, Model.FollowStatusMap),
        CurrentUser = Model.CurrentUser
    })
}
